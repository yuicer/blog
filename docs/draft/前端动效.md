---
title: 前端动效
date: 2019-05-04 19:18:40
category: 尺工
notArticle: true
---
<p></p>
<!-- more -->

## 1. gif 动画

这个对前端很省事情。但是它有一个严重缺陷是 gif 图会有白边，而且没有透明度

## 2. css 动画

1. 图片帧动画

核心在于 `background-position` `animation: ... steps(1)` 通过快速切位置达到动画的效果

<img src="https://s3.music.126.net/nact/s/client/images/year2017/p05/man_repeat.png?d8aa052%E2%80%A6">

<iframe src="https://yuicer.com/demo/demo_180102/index_man.html" frameborder="no" marginwidth="0" marginheight="0" width="100" height="150""></iframe>

ps： 一些小视频也可以通过这种方式制作

### 3. svg 动画

<!-- https://www.villainhr.com/page/2017/05/01/SVG%20%E5%8A%A8%E7%94%BB%E7%B2%BE%E9%AB%93#%E7%9F%A9%E9%98%B5%E5%8A%A8%E7%94%BB -->

svg 可以沿着某一路线进行移动，这一点是 css3 做不到的

animateMotion 中的 path 属性可以定义这一行为

其中 rotate 设置为 auto 后，可让图形沿切线移动

其他和 css 中的属性差不多

1. 樱花【路径动画】
   <iframe src="https://yuicer.com/demo/demo_180102/index_sakura.html" frameborder="yes" marginwidth="0" marginheight="0" height="300" scrolling="no"></iframe>

```html
<animateTransform
  attributeName="transform"
  attributeType="XML"
  type="rotate"
  from="0 0 0"
  to="360 90 90"
  dur="8s"
  repeatCount="indefinite"
></animateTransform>
<animateMotion begin="-1s" dur="4s" rotate="auto" repeatCount="indefinite">
  <mpath xlink:href="#a"></mpath>
</animateMotion>
<path d="M674.09-33.84C342.94 353.33 88.03 549.27-90.66 553.98" id="a"></path>
```

2. 线段动画

主要点是 `stroke-dasharray` dasharray 将线段分为实线和虚线，通过合理设置实线虚线长可以实现动画

虚线根据需要设的大一点，这样使需要的线段图形部分全部为实线，通过动画实现线段的加载。

不过由于线段的设置原因，实际的动画时间可能不会是设置的动画时间，需要根据情况调整

一般的 loading 转圈图都是这个原理

<svg id="ani" width="100px" height="100px" viewBox="0 0 100 100">
  <g stroke-width="4" stroke="#C7C7CB" fill="none">
    <rect x="0" y="0" width="100" height="100" ></rect>
  </g>
</svg>

<style>
#ani {
  animation: stroke 5s both infinite;
  stroke-dasharray: 0 400;
}

@keyframes stroke {
  100% {
  stroke-dasharray: 400 400;
  }
}
</style>

```js
<svg id="ani" width="100px" height="100px" viewBox="0 0 100 100">
  <g stroke-width="4" stroke="#C7C7CB" fill="none">
    <rect x="0" y="0" width="100" height="100" ></rect>
  </g>
</svg>

<style>
#ani {
  animation: stroke 5s both infinite;
  stroke-dasharray: 0 400;
}

@keyframes stroke {
  100% {
  stroke-dasharray: 400 400;
  }
}
</style>
```

### 4. [lottie-web](http://airbnb.io/lottie/#/)

这个是 airbnb 出的一个一站式解决方案。原理还是 svg 路径动画，不过它结合了 ae，而且支持全平台【web 端，app 端，还有 airbnb 自己的 RN】，ae 上做完之后直接装这个插件，然后导出给各端就好了。

前端的 [api](http://airbnb.io/lottie/#/web?id=usage-1) 还是很多的。
