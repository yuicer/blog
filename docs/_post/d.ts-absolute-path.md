---
title: ts absolute path
date: 2020/03/14 11:01:40
tag: æ²¹å½©
img: /img/ts-logo.png
---

### å‰è¨€

æœ€è¿‘ä½¿ç”¨ ts è¿›è¡Œç¼–å†™åŒ…çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜ã€‚ä½¿ç”¨ `tsconfig.json` ä¸­çš„ `declaration: true` ç”Ÿæˆçš„ d.ts æ–‡ä»¶ä¸­ï¼Œæ¨¡å—ä¹‹é—´çš„è·¯å¾„å¼•ç”¨ä¾ç„¶è¿˜æ˜¯åˆ«åã€‚è¿™å°±ä¼šå¯¼è‡´è¢«åˆ«çš„é¡¹ç›®å¼•ç”¨æ—¶æŠ¥é”™æ‰¾ä¸åˆ°æ¨¡å—ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆ ts æä¾›äº† `baseUrl path` å‚æ•°ï¼Œæ”¯æŒä½¿ç”¨åˆ«åä¹‹åï¼Œç”Ÿæˆå‡ºæ¥çš„å£°æ˜æ–‡ä»¶ä¾ç„¶æœ‰è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ

```
// index.d.ts

import {a} from @alias
// it should be import {a} from './A'
```

### ts çš„è¯´è¾

åœ¨å®˜æ–¹ä»“åº“é‡Œé¢æœç´¢å…³é”®è¯ `absolute path relative npm`ï¼Œè¿™é‡Œä¼šæœ‰å¾ˆå¤šç›¸å…³çš„é—®é¢˜ï¼Œè¿™é‡Œä¸¾ä¸€ä¸ª ğŸŒ°[ä¾‹å­](https://github.com/microsoft/TypeScript/issues/25677) ï¼Œå®˜æ–¹çš„è§‚ç‚¹æ˜¯ï¼Œ`**ts åšçš„äº‹æƒ…åº”è¯¥ä¸”å¿…é¡»å±€é™äºã€ç±»å‹ã€‘**`ï¼Œæˆ‘ä¸åšä»»ä½•æœ‰å…³ä»£ç åŠŸèƒ½ï¼Œæˆ–è€…æ”¹å˜ä»£ç çš„äº‹æƒ…ã€‚æˆ‘åªåšç±»å‹çš„å¢å¼ºå’Œæ£€æŸ¥ã€‚è¿™ä¸€ç‚¹ä½“ç°å¾ˆæ˜ç»†çš„å°±æ˜¯ tsconfig.json è¿™ä¸ªä¸œè¥¿ã€‚ä½†æ˜¯ä½ å¯èƒ½ä¼šå‘ç°ï¼Œè¿™ä¸å¯¹å•Šã€‚ tsconfig.json é‡Œé¢ä¹Ÿæœ‰å¾ˆå¤šä¼šå½±å“åˆ°ç¼–è¯‘çš„é€‰é¡¹å•Šï¼Œå®ƒçš„å¾ˆå¤šä¸æ˜¯å’Œ webpack é…ç½®å·®ä¸å¤šå—ã€‚ `tsc build` ä¸å°±ä¼šèµ°é…ç½®å—ã€‚ç¡®å®ï¼Œè¿™ä¸ªåœ°æ–¹ä¼šé€ æˆå›°æ‰°
ã€‚è¿™é‡Œä¸å±•å¼€æè¿°ï¼Œå¯ä»¥å»æŸ¥ä¸€ä¸‹ã€`tsc bable webpack`ã€‘ä¸‰è€…ç›´æ¥çš„å…³ç³»å’ŒåŒºåˆ«ã€‚è¿™é‡Œä»ç»“è®ºä¸Šæ¥è¯´ï¼Œ`tsconfig.json` æ˜¯ç»™ `tsc || webpack ts loader` ç”¨çš„ï¼Œå®ƒç¡®å®æœ‰ä¸€å®šçš„ç¼–è¯‘åŠŸèƒ½ï¼Œä½†æ˜¯å¾ˆå±€é™ã€‚å®ƒçš„å¤§å¤šä½œç”¨è¿˜æ˜¯åœ¨äºç±»å‹æ–¹é¢ã€‚

### è§£å†³

å¤šäº issue ä¸­çš„å„ä½è€å“¥ï¼Œè¿™é‡Œç²˜è´´ä¸€ä¸ªå¯¹æˆ‘æœ‰ç”¨çš„æ–¹æ³•ï¼Œé¦–å…ˆä¸‹è½½ä¸‹é¢è¿™ä¸¤ä¸ªåŒ…ï¼Œç„¶åæ›´æ”¹ tsconfig.json ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ã€‚

ps: å¦‚æœæ˜¯ä½¿ç”¨ webpack rollup ç­‰å·¥å…·çš„è¯ï¼Œå¯ä»¥å‚è€ƒ [è¿™é‡Œ](https://github.com/cevek/ttypescript/#webpack) æ¥é…ç½® loader

```
npm i -D ttypescript typescript-transform-paths
```

```
// tsconfig.json
{
  "compilerOptions": {
    "plugins": [
      {
        "transform": "typescript-transform-paths",
        "afterDeclarations": true
      }
    ]
  }
}
```

```
// if with webpack
 {
    test: /\.ts$/,
    use: [
      {
        loader: 'ts-loader',
        options: {
          compiler: 'ttypescript',
        },
      },
    ]
  }
```
